function injectAndSend(e,t){chrome.scripting.executeScript({target:{tabId:e},files:["contentScript.js"]},(()=>{chrome.tabs.sendMessage(e,{text:t})}))}chrome.runtime.onInstalled.addListener((()=>{chrome.contextMenus.create({id:"sendToGemini",title:"Send to Gemini",contexts:["selection"]})})),chrome.contextMenus.onClicked.addListener(((e,t)=>{if("sendToGemini"===e.menuItemId){const t=e.selectionText;chrome.tabs.query({url:"https://gemini.google.com/*"},(e=>{if(0===e.length)chrome.tabs.create({url:"https://gemini.google.com/"},(e=>{injectAndSend(e.id,t)}));else{const n=e[0];chrome.tabs.update(n.id,{active:!0}),injectAndSend(n.id,t)}}))}}));